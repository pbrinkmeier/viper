\documentclass[parskip=full,11pt,twoside]{scrartcl}
\usepackage[utf8]{inputenc}

\title{VIPER Interactive Prolog Education Runtime}
\subtitle{Implementierungsbericht}
\author{Paul Brinkmeier, Lukas Brocke, Jannik Koch, Aaron Maier, Christian Oder}

% section numbers in margins:
\renewcommand\sectionlinesformat[4]{\makebox[0pt][r]{#3}#4}

% header & footer
\usepackage{scrlayer-scrpage}
\lofoot{\today}
\refoot{\today}
\pagestyle{scrheadings}

\usepackage{amsmath} % for $\text{}$

\usepackage[sfdefault,light]{roboto}
\usepackage[T1]{fontenc}
\usepackage[german]{babel}
\usepackage[yyyymmdd]{datetime} % must be after babel
\renewcommand{\dateseparator}{-} % ISO8601 date format
\usepackage{hyperref}
\usepackage[nameinlink]{cleveref}
\crefname{figure}{Abb}{Abb}
\usepackage[section]{placeins}
\usepackage{xcolor}
\usepackage{graphicx}
\usepackage{listings}
\usepackage{courier}
\usepackage{enumitem}
\usepackage{dirtree}
\usepackage{pgfplots}
\usepackage{multicol}
\hypersetup{
	pdftitle={Implementierungsbericht},
}

\usepackage{csquotes}

\newcommand\urlpart[2]{$\underbrace{\text{\texttt{#1}}}_{\text{#2}}$}

\lstset{basicstyle=\ttfamily,breaklines=true}

% Don't strech across whole page
\raggedbottom

% Start new page with each section
\usepackage{sectsty}
\sectionfont{\clearpage}

\begin{document}
\pagenumbering{roman}
\maketitle
\tableofcontents

\section{Einleitung}
\pagenumbering{arabic}
\setcounter{page}{1}

% Anschluss an Entwurfsdokument
Bei VIPER handelt es sich um ein grafisches Tool zur Unterstützung des Lernens und Lehrens der logischen Programmiersprache Prolog. Hierbei soll der Nutzer die Interpretation von Prolog-Abfragen durch eine Visualisierung in Form einer Baumstruktur nachvollziehen können. Weiter wird ein Editor zur Erstellung von Prolog-Quelltext sowie eine Konsole zur Eingabe von Abfragen und Ausgabe von Informationen für den Nutzer bereitgestellt.

Die Entwicklung von VIPER erfolgt in der Programmiersprache Java anhand des Model-View-Controller-Architekturstils. Hiernach wird die grafische Darstellungs-Komponente (View) von der internen Logik (Model) getrennt. Die Vermittlung zwischen diesen Komponenten erfolgt über den Controller. Die grafische View-Komponente ist hierbei für Desktop-Nutzung ausgelegt und mit Swing implementiert. Die Generierung der Visualisierung erfolgt mit Graphviz über die Graphviz-Java Implementation, das Darstellen der erzeugten Visualisierung nutzt die Apache Batik Bibliothek.

\section{Änderungen zum Entwurf und Pflichtenheft}

\section{Fortschritt der Implementierung}

% Muss-Kriterien alle drin?
% Welche Kann-Kriterien?

\section{Implementierungsplan}

% Abweichungen?

\section{Unit-Tests}

\subsection{Übersicht}
\begin{figure}[!h]
	\centering
	\begin{tabular}{l | c | c | c | c}
		\hline
		Paket:			& Testzahl & Erfüllt & Fehlschlagend & Ignoriert \\
		\hline
		Gesamt:			& 84 	& 79 & 0 & 5\\
		\hline
		Controller: 	& 21	& 19 & 0 & 2\\
		View:			& 0		& 0 & 0 & 0\\
		Parser:			& 2		& 2 & 0 & 0\\
		AST:			& 37	& 34 & 0 & 3\\
		Interpreter:	& 23	& 23 & 0 & 0\\
		Visualisation:	& 1		& 1 & 0 & 0\\
		\hline
	\end{tabular}
\end{figure}

\subsubsection{Unit-Tests: Controller}
\begin{figure}[!h]
	\centering
	\begin{tabular}{l | c | c | c | c}
		\hline
		Klasse:			& Testzahl & Erfüllt & Fehlschlagend & Ignoriert \\
		\hline
		CommandExportImageTest 	& 2 & 0 & 0 & 2\\
		CommandFormatTest		& 1 & 1 & 0 & 0\\
		CommandNewTest			& 1 & 1 & 0 & 0\\
		CommandOpenTest			& 3 & 3 & 0 & 0\\
		CommandParseTest		& 3 & 3 & 0 & 0\\
		CommandSaveTest			& 4 & 4 & 0 & 0\\
		CommandSetLangTest		& 1 & 1 & 0 & 0\\
		CommandToggleLibTest	& 1 & 1 & 0 & 0\\
		FileFiltersTest			& 4 & 4 & 0 & 0\\
		FileUtilitiesTest		& 1 & 1 & 0 & 0\\
		\hline
	\end{tabular}
\end{figure}

\subsubsection{Unit-Tests: View}
\begin{figure}[!h]
	\centering
	\begin{tabular}{l | c | c | c | c}
		\hline
		Klasse:		& Testzahl & Erfüllt & Fehlschlagend & Ignoriert \\
		\hline
	\end{tabular}
\end{figure}

\subsubsection{Unit-Tests: Parser}
\begin{figure}[!h]
	\centering
	\begin{tabular}{l | c | c | c | c}
		\hline
		Klasse:		& Testzahl & Erfüllt & Fehlschlagend & Ignoriert \\
		\hline
		ParserTest 	& 2 & 2 & 0 & 0\\
		\hline
	\end{tabular}
\end{figure}

\subsubsection{Unit-Tests: AST}
\begin{figure}[!h]
	\centering
	\begin{tabular}{l | c | c | c | c}
		\hline
		Klasse:						& Testzahl & Erfüllt & Fehlschlagend & Ignoriert \\
		\hline
		AdditionOperationTest 		& 2 & 2 & 0 & 0\\		
		BinaryOperationTest 		& 5 & 4 & 0 & 1\\
		FunctorGoalTest 			& 2 & 2 & 0 & 0\\
		FunctorTest 				& 9 & 8 & 0 & 1\\		
		MultiplicationOperationTest & 2 & 2 & 0 & 0\\
		NumberTest 					& 5 & 5 & 0 & 0\\
		RuleTest 					& 3 & 3 & 0 & 0\\		
		SubtractionOperationTest 	& 2 & 2 & 0 & 0\\
		TermTest 					& 1 & 1 & 0 & 0\\
		VariableTest 				& 6 & 5 & 0 & 1\\
		\hline
	\end{tabular}
\end{figure}

\subsubsection{Unit-Tests: Interpreter}
\begin{figure}[!h]
	\centering
	\begin{tabular}{l | c | c | c | c}
		\hline
		Klasse:						& Testzahl & Erfüllt & Fehlschlagend & Ignoriert \\
		\hline
		IndexifierTest 			& 3 & 3 & 0 & 0\\		
		InterpreterTest 		& 1 & 1 & 0 & 0\\
		SubstitutionTest 		& 3 & 3 & 0 & 0\\
		UnificationResultTest 	& 7 & 7 & 0 & 0\\		
		UnificationTest 		& 8 & 8 & 0 & 0\\
		VariableExtractorTest 	& 1 & 1 & 0 & 0\\
		\hline
	\end{tabular}
\end{figure}

\subsubsection{Unit-Tests: Visualisation}
\begin{figure}[!h]
	\centering
	\begin{tabular}{l | c | c | c | c}
		\hline
		Klasse:				& Testzahl & Erfüllt & Fehlschlagend & Ignoriert \\
		\hline
		GraphvizMakerTest 	& 1 & 1 & 0 & 0\\
		\hline
	\end{tabular}
\end{figure}

\newpage
\subsection{Abdeckung}
\begin{figure}[!h]
\centering
\hspace*{-1cm}
\begin{tikzpicture}[scale=1.2]
	\begin{axis}[
		xbar, 
		y=-0.5cm,
		bar width=0.3cm,
		xmin = 0,
		xmax = 100,
		enlarge y limits={abs=0.45cm},
		xlabel={Gesamtabdeckung in Prozent},
		symbolic y coords={
			Instruktions-Abdeckung,
			Branch-Abdeckung
		},
		ytick=data,
		nodes near coords, nodes near coords align={horizontal},
		]
		\addplot table[col sep=comma,header=false] {
			77, Instruktions-Abdeckung
			60, Branch-Abdeckung
		};
	\end{axis}
\end{tikzpicture}\\\vspace*{1cm}\hspace*{1cm}
\begin{tikzpicture}[scale=1.2]
	\begin{axis}[
		xbar, 
		y=-0.5cm,
		bar width=0.3cm,
		xmin = 0,
		enlarge y limits={abs=0.45cm},
		xlabel={Abgedeckte Instruktionen in Prozent},
		symbolic y coords={
			Controller,
			View,
			Parser,
			AST,
			Interpreter,
			Visualisation
	    },
		ytick=data,
		nodes near coords, nodes near coords align={horizontal},
		]
		\addplot table[col sep=comma,header=false] {
			65, Controller
			77, View
			70, Parser
			92, AST
			95, Interpreter
			98, Visualisation
		};
	\end{axis}
\end{tikzpicture}\\\vspace*{1cm}\hspace{1cm}
\begin{tikzpicture}[scale=1.2]
	\begin{axis}[
		xbar, 
		y=-0.5cm,
		bar width=0.3cm,
		xmin = 0,
		enlarge y limits={abs=0.45cm},
		xlabel={Abgedeckte Branches in Prozent},
		symbolic y coords={
			Controller,
			View,
			Parser,
			AST,
			Interpreter,
			Visualisation,
		},
		ytick=data,
		nodes near coords, nodes near coords align={horizontal},
		]
		\addplot table[col sep=comma,header=false] {
			33, Controller
			24, View
			59, Parser
			75, AST
			92, Interpreter
			83, Visualisation
		};
		\end{axis}
	\end{tikzpicture}
\end{figure}


\section{Statistiken}

% Commits, LoC, JavaDoc, ...
\subsection{Commits}
\begin{figure}[!h]
	\centering
	%% Merge-Commits sind abgezählt, Rest via git rev-list <HASH> --count
	Zahl der Commits nach Abschluss der Entwurfsphase (25. Juni 2018): 344\\\vspace*{0.3cm}
	\begin{tabular}{l | c | c | c | c}
		\hline
		Datum des Abrufs:	& 2. Juli 2018 & 9. Juli 2018 & 16. Juli 2018 & 23. Juli 2018\\
		\hline
		Commit-Zahl insgesamt:		& 408 & 538 & TODO & TODO \\
		Differenz zur vorigen Woche:	& 64 & 130 & TODO & TODO \\
		Differenz zum Phasenbeginn: & 64 & 194 & TODO & TODO \\
		Merge-Commits in Woche: & 10 & 14 & 16 & TODO \\
		\hline
	\end{tabular}
\end{figure}
\vspace*{1cm}
\begin{minipage}{0.5\textwidth}
		\centering
		Commits pro Woche:\\
		\begin{tikzpicture}[scale=0.9]
		\begin{axis}[
		symbolic x coords = {1. Woche, 2. Woche, 3. Woche, 4. Woche}, xtick = data]
		
		\addplot[ybar, fill = blue] coordinates {
			(1. Woche, 64)
			(2. Woche, 194)
			(3. Woche, 0)
			(4. Woche, 0)
		};
		\end{axis}
		\end{tikzpicture}
\end{minipage}\hspace*{0.7cm}
\begin{minipage}{0.5\textwidth}
		\centering
		Merge-Commits pro Woche:\\
		\begin{tikzpicture}[scale=0.9]
		\begin{axis}[
		symbolic x coords = {1. Woche, 2. Woche, 3. Woche, 4. Woche}, xtick = data]
		
		\addplot[ybar, fill = blue] coordinates {
			(1. Woche, 10)
			(2. Woche, 14)
			(3. Woche, 16)
			(4. Woche, 0)
		};
		\end{axis}
		\end{tikzpicture}
\end{minipage}

\subsection{Codebase}
\begin{figure}[!h]
	\centering
	Geschriebene Zeilen Code:\\\vspace*{0.3cm}
	\begin{tabular}{l | r | r | r | r}
		\hline
		%%% Berechnet via CLOC
		Sprache & Dateien & Leerzeilen & Kommentare & Code\\
		\hline
		Java & 123 & 1327 & 3139 & 4761\\
		Prolog & 2 & 3 & 0 & 14\\
		\hline
	\end{tabular}
\end{figure}


\end{document}
